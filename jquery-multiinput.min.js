(function(g){var k=0,h=[],m=[],n=[],e=null,s=["pointer","mouse","touch"],q=["start","move","end","enter","leave"],p={start:"pointerdown mousedown touchstart",move:"pointermove mousemove touchmove",end:"pointerup mouseup touchend",enter:"pointerenter mouseenter touchenter",leave:"pointerleave mouseleave touchleave"},t=function(c,d,a,b){var f=function(a,b,c,d){var f,r="multi"+b,h=g(a);return function(a){a.multiType=r;f=s.filter(function(b){return~a.type.indexOf(b)});if(e!==f[0]){if(("touch"===e||"pointer"===
e)&&"mouse"===f[0]||"pointer"===e&&"touch"===f[0])return;if(null!==e){e=f[0];return}e=f[0]}return null===c?h.triggerHandler(r,[a,d]):h.find(a.target).trigger(r,[a,d])}}(c,d,a,k);n[k]=f;h[k]=b;if(null===a)g(c).on(p[d],f);else g(c).on(p[d],a,f);return k++},u=g.fn.on;g.fn.on=function(c,d,a,b,f){switch(c){case "multistart":case "multimove":case "multiend":case "multienter":case "multileave":if("undefined"===typeof d)break;var l,g,e,k=q.filter(function(a){return~c.indexOf(a)});e=function(a,b,c){if(g===
h[c])return b.multiType=a.type,g.apply(this,[b])};if("function"===typeof d)l=null,g=d,d=e;else if("function"===typeof a)l=d,g=a,a=e;else throw Error("\u5f15\u6570\u304c\u4e0d\u6b63\u3060\u3088\u3063");l=t(this,k[0],l,g);m[l]=e}return u.apply(this,[c,d,a,b,f])};var v=g.fn.off;g.fn.off=function(c,d,a){switch(c){case "multistart":case "multimove":case "multiend":case "multienter":case "multileave":var b,f,e;if("function"===typeof d){b=h.indexOf(d);if(0>b)break;d=m[b];e=n[b];f=q.filter(function(a){return~c.indexOf(a)});
g(this).off(p[f[0]],e)}else if("function"===typeof a){b=h.indexOf(a);if(0>b)break;a=m[b];e=n[b];f=q.filter(function(a){return~c.indexOf(a)});g(this).off(p[f[0]],e)}"function"===typeof e&&(delete h[b],delete m[b],delete n[b])}return v.apply(this,[c,d,a])};g.fn.getMultiXY=function(c,d){var a={};if(!c)return a;d=d||{};d.target=isNaN(d.target)?0:Math.max(0,Math.min(d.target-0,2));var b=["changedTouches","targetTouches","touches"][d.target];switch(c.type){case "mousedown":case "mousemove":case "mouseup":case "mouseenter":case "mouseleave":case "pointerdown":case "pointermove":case "pointerup":case "pointerenter":case "pointerleave":a.screenX=
c.screenX;a.screenY=c.screenY;a.clientX=c.clientX;a.clientY=c.clientY;a.pageX=c.pageX;a.pageY=c.pageY;break;case "touchstart":case "touchmove":case "touchend":case "touchenter":case "touchleave":case "touchcancel":b=c.originalEvent[b];if(!b||!b.length)break;a.screenX=b[0].screenX;a.screenY=b[0].screenY;a.clientX=b[0].clientX;a.clientY=b[0].clientY;a.pageX=b[0].pageX;a.pageY=b[0].pageY;break;default:throw Error("$.fn.getMultiXY : \u8b0e\u306e\u30a4\u30d9\u30f3\u30c8"+c.type+"\u3092\u53d7\u3051\u307e\u3057\u305f\u3002");
}return a}})(jQuery);
