!function(e){var t=0,n=[],r=[],u=[],i=null,o=["pointer","mouse","touch"],c=["start","move","end","enter","leave"],a={start:"pointerdown mousedown touchstart",move:"pointermove mousemove touchmove",end:"pointerup mouseup touchend",enter:"pointerenter mouseenter touchenter",leave:"pointerleave mouseleave touchleave"},s=function(r,c,s,f){var l=function(t,n){var r,u="multi"+n;return function(n){if(n.multiType=u,r=o.filter(function(e){return~n.type.indexOf(e)}),i!==r[0]){if("touch"===i)return;if(null!==i)return void(i=r[0]);i=r[0]}return e(t).triggerHandler(u,[n])}},m=l(r,c,t);return u[t]=m,n[t]=f,null===s?e(r).on(a[c],m):e(r).on(a[c],s,m),t++},f=e.fn.on;e.fn.on=function(e,t,n,u,i){switch(e){case"multistart":case"multimove":case"multiend":case"multienter":case"multileave":var o,a,l,m,p=c.filter(function(t){return~e.indexOf(t)});if(m=function(e,t){return t.multiType=e.type,l.apply(this,[t])},"function"==typeof t)a=null,l=t,t=m;else{if("function"!=typeof n)throw new Error("引数が不正だよっ");a=t,l=n,n=m}o=s(this,p[0],a,l),r[o]=m}return f.apply(this,[e,t,n,u,i])};var l=e.fn.off;e.fn.off=function(t,i,o){switch(t){case"multistart":case"multimove":case"multiend":case"multienter":case"multileave":var s,f,m;if("function"==typeof i){if(s=n.indexOf(i),0>s)break;i=r[s],m=u[s],f=c.filter(function(e){return~t.indexOf(e)}),e(this).off(a[f[0]],m)}else if("function"==typeof o){if(s=n.indexOf(o),0>s)break;o=r[s],m=u[s],f=c.filter(function(e){return~t.indexOf(e)}),e(this).off(a[f[0]],m)}"function"==typeof m&&(delete n[s],delete r[s],delete u[s])}return l.apply(this,[t,i,o])},e.fn.getMultiXY=function(e,t){var n={};if(!e)return n;t=t||{},t.target=isNaN(t.target)?0:Math.max(0,Math.min(t.target-0,2));var r=["changedTouches","targetTouches","touches"][t.target];switch(e.type){case"mousedown":case"mousemove":case"mouseup":case"mouseenter":case"mouseleave":default:n.screenX=e.screenX,n.screenY=e.screenY,n.clientX=e.clientX,n.clientY=e.clientY,n.pageX=e.pageX,n.pageY=e.pageY;break;case"touchstart":case"touchmove":case"touchend":case"touchenter":case"touchleave":case"touchcancel":var u=e.originalEvent[r];if(!u||!u.length)return n;n.screenX=u[0].screenX,n.screenY=u[0].screenY,n.clientX=u[0].clientX,n.clientY=u[0].clientY,n.pageX=u[0].pageX,n.pageY=u[0].pageY}return n}}(jQuery);
