(function(f){var k=0,h=[],n=[],p=[],e=null,t=["pointer","mouse","touch"],r=["start","move","end","enter","leave"],q={start:"pointerdown mousedown touchstart",move:"pointermove mousemove touchmove",end:"pointerup mouseup touchend",enter:"pointerenter mouseenter touchenter",leave:"pointerleave mouseleave touchleave"},u=function(c,d,a,b){var g=function(a,b,c,d){var l,g="multi"+b,h=f(a);return function(a){a.multiType=g;l=t.filter(function(b){return~a.type.indexOf(b)});if(e!==l[0]){if(("touch"===e||"pointer"===
e)&&"mouse"===l[0]||"pointer"===e&&"touch"===l[0])return;if(null!==e){e=l[0];return}e=l[0]}return null===c?h.triggerHandler(g,[a,d]):h.find(a.target).trigger(g,[a,d])}}(c,d,a,k);p[k]=g;h[k]=b;if(null===a)f(c).on(q[d],g);else f(c).on(q[d],a,g);return k++},v=f.fn.on;f.fn.on=function(c,d,a,b,g){switch(c){case "multistart":case "multimove":case "multiend":case "multienter":case "multileave":if("undefined"===typeof d)break;var m,f,e,k=r.filter(function(a){return~c.indexOf(a)});e=function(a,b,c){if(f===
h[c])return b.multiType=a.type,a=b.originalEvent.changedTouches,b.isMultiTouch=!!a&&1<a.length,f.apply(this,[b])};if("function"===typeof d)m=null,f=d,d=e;else if("function"===typeof a)m=d,f=a,a=e;else throw Error("\u5f15\u6570\u304c\u4e0d\u6b63\u3060\u3088\u3063");m=u(this,k[0],m,f);n[m]=e}return v.apply(this,[c,d,a,b,g])};var w=f.fn.off;f.fn.off=function(c,d,a){switch(c){case "multistart":case "multimove":case "multiend":case "multienter":case "multileave":var b,g,e;if("function"===typeof d){b=h.indexOf(d);
if(0>b)break;d=n[b];e=p[b];g=r.filter(function(a){return~c.indexOf(a)});f(this).off(q[g[0]],e)}else if("function"===typeof a){b=h.indexOf(a);if(0>b)break;a=n[b];e=p[b];g=r.filter(function(a){return~c.indexOf(a)});f(this).off(q[g[0]],e)}"function"===typeof e&&(delete h[b],delete n[b],delete p[b])}return w.apply(this,[c,d,a])};f.fn.getMultiXY=function(c,d){var a={};if(!c)return a;d=d||{};d.target=isNaN(d.target)?0:Math.max(0,Math.min(d.target-0,2));var b=["changedTouches","targetTouches","touches"][d.target];
switch(c.type){case "mousedown":case "mousemove":case "mouseup":case "mouseenter":case "mouseleave":case "pointerdown":case "pointermove":case "pointerup":case "pointerenter":case "pointerleave":a.screenX=c.screenX;a.screenY=c.screenY;a.clientX=c.clientX;a.clientY=c.clientY;a.pageX=c.pageX;a.pageY=c.pageY;break;case "touchstart":case "touchmove":case "touchend":case "touchenter":case "touchleave":case "touchcancel":b=c.originalEvent[b];if(!b||!b.length)break;a.screenX=b[0].screenX;a.screenY=b[0].screenY;
a.clientX=b[0].clientX;a.clientY=b[0].clientY;a.pageX=b[0].pageX;a.pageY=b[0].pageY;break;default:throw Error("$.fn.getMultiXY : \u8b0e\u306e\u30a4\u30d9\u30f3\u30c8"+c.type+"\u3092\u53d7\u3051\u307e\u3057\u305f\u3002");}return a}})(jQuery);